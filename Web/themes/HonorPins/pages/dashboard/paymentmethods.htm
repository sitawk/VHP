title = "User Dashboard"
url = "/dashboard/paymentmethods"
layout = "default"
[account]
redirect=0
[session]
[Dashboard]
==
<?php
use Intervention\Image\ImageManagerStatic as Image;
function onEditCertificate(){
  $addorganization = Codersocean\Honorpins\Models\Certificate::where('id',post('id'))->first();
  return $addorganization;
}

function onStart(){
  $this['categories'] = Codersocean\Honorpins\Models\Categories::get();
  $this['user'] = $user = Auth::getuser();

  if(!$user){
    $redrect = '/login';
    return Redirect::to($redrect);
  }


}
function onRedirect(){
  $user = Auth::getuser();
    $this['user'] = $user;
  $this['addpin'] = 0;
    $this['categories'] = Codersocean\Honorpins\Models\Categories::get();
    return [
    '#completecertificate' => $this->renderPartial('profile/addcertificate'),
        '#createcertificatebutton' => $this->renderPartial('userdashboard/createcertificatebutton'),
        '#organizationcertificate' => $this->renderPartial('profile/organizationcertificates'),
    ];
}


function onCloseModal(){
$user = Auth::getuser();
  $this['user'] = $user;
$this['addpin'] = 0;
  $this['categories'] = Codersocean\Honorpins\Models\Categories::get();
  return [
  '#completecertificate' => $this->renderPartial('profile/addcertificate'),
      '#createcertificatebutton' => $this->renderPartial('userdashboard/createcertificatebutton'),
      '#organizationcertificate' => $this->renderPartial('profile/organizationcertificates'),
  ];
}
?>
==

<link href="{{ 'assets/css/dashboard.css'|theme }}" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="{{'assets/sweetalert.css'|theme}}">
<section>
  <style>
  .collapse .nav-item {

  }
  .rotateas{
-webkit-transform: rotate(90deg);  /* Chrome, Safari, Opera */
-moz-transform: rotate(90deg);  /* Firefox */
-ms-transform: rotate(90deg);  /* IE 9 */
transform: rotate(90deg);  /* Standard syntax */
}
  </style>
  <script>
$(document).ready(function(){
// Add minus icon for collapse element which is open by default


// Toggle plus minus icon on show hide of collapse element
$(".collapse").on('show.bs.collapse', function(){
$(this).addClass("nav-tabs");
  $(this).parent().find(".pull-right").removeClass("fa-angle-right");

      $(this).parent().find(".pull-right").addClass("fa-angle-down");
}).on('hide.bs.collapse', function(){
  $(this).removeClass("nav-tabs");
$(this).parent().find(".pull-right").removeClass("fa-angle-down");

    $(this).parent().find(".pull-right").addClass("fa-angle-right");
});
});
</script>
    <div class="header-space"></div>
    <div class="container mt-65 py-5">
        <div class="row">
            <div class="col-lg-12 text-center">
                <h2>Certificates</h2>
            </div>
            <div class="col-lg-3">
              <div class="acc-leftbar">
                  <div class="nav nav-tabs" id="nav-tab" role="tablist">
                    <a class="nav-item nav-link"  href="/dashboard"><i
                          class="fas fa-user-alt"></i>Profile</a>
                        <a class="nav-item nav-link  collshow " data-toggle="collapse" data-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation"><i class="fas fa-building"></i>Organizations <i class="fas fa-angle-right pull-right"></i></a>
                        <!-- {%if myorganizations|length > 0%}
                        <a class="nav-item nav-link" id="nav-password-tab" data-toggle="tab"  href="/dashboard/organization-certificates" role="tab" aria-controls="nav-password" aria-selected="false"><i class="fas fa-medal"></i>Organization Certificates</a>
                        <a class="nav-item nav-link" id="nav-notification-tab" data-toggle="tab" href="/dashboard/organization-pins"  role="tab" aria-controls="nav-notification" aria-selected="false"><i class="fas fa-certificate"></i>Organization Pins</a>
                        {%endif%} -->
                        <div class="collapse" style="width:100%" id="navbarToggleExternalContent">
                            <a class="nav-item nav-link"   href="/dashboard/organizations" style="font-size:15px;" ><i style="font-size:14px"  class="fas "></i>My Organization</a>
                            <a class="nav-item nav-link"  href="/dashboard/organization-pins" style="font-size:15px;" ><i style="font-size:14px"  class="fas "></i> Organization Pins</a>
                          <a class="nav-item nav-link "  href="/dashboard/organization-certificates" style="font-size:15px;"  ><i style="font-size:14px"  class="fas "></i> Organization Certificates</a>
  <a class="nav-item nav-link"  href="/dashboard/my-orders" style="font-size:15px;"  ><i style="font-size:14px"  class="fas "></i> Organization Orders</a>
                        </div>

                      <a class="nav-item nav-link"  href="/dashboard/personal-certificates" ><i class="fas fa-medal"></i>My Certificates</a>
                      <a class="nav-item nav-link"  href="/dashboard/personal-pins" ><i class="fas fa-certificate"></i>My Pins</a>
                      <a class="nav-item nav-link active"  href="/dashboard/paymentmethods" ><i class="fas fa-credit-card"></i>Payment Methods</a>
                      <a class="nav-item nav-link"   href="/dashboard/change-password" ><i class="fas fa-key"></i>Change Password</a>
                  </div>
              </div>
            </div>
            <div class="col-lg-9">


              <div class="bg-light shadow-sm rounded p-4 mb-4">
                          <h3 class="text-5 font-weight-400 mb-4">Credit or Debit Cards <span class="text-muted text-4">(for payments)</span></h3>
                          <div class="row">
                            <div class="col-12 col-sm-6 col-lg-4">
                              <div class="account-card account-card-primary text-white rounded p-3 mb-4 mb-lg-0">
                                <p class="text-4">XXXX-XXXX-XXXX-4151</p>
                                <p class="d-flex align-items-center"> <span class="account-card-expire text-uppercase d-inline-block opacity-6 mr-2">Valid<br>
                                  thru<br>
                                  </span> <span class="text-4 opacity-9">07/24</span> <span class="bg-light text-0 text-body font-weight-500 rounded-pill d-inline-block px-2 line-height-4 opacity-8 ml-auto">Primary</span> </p>
                                <p class="d-flex align-items-center m-0"> <span class="text-uppercase font-weight-500">Smith Rhodes</span> <img class="ml-auto" src="images/payment/visa.png" alt="visa" title=""> </p>
                                <div class="account-card-overlay rounded"> <a href="#" data-target="#edit-card-details" data-toggle="modal" class="text-light btn-link mx-2"><span class="mr-1"><i class="fas fa-edit"></i></span>Edit</a> <a href="#" class="text-light btn-link mx-2"><span class="mr-1"><i class="fas fa-minus-circle"></i></span>Delete</a> </div>
                              </div>
                            </div>
                            <div class="col-12 col-sm-6 col-lg-4">
                              <div class="account-card text-white rounded p-3 mb-4 mb-lg-0">
                                <p class="text-4">XXXX-XXXX-XXXX-6296</p>
                                <p class="d-flex align-items-center"> <span class="account-card-expire text-uppercase d-inline-block opacity-6 mr-2">Valid<br>
                                  thru<br>
                                  </span> <span class="text-4 opacity-9">07/23</span> </p>
                                <p class="d-flex align-items-center m-0"> <span class="text-uppercase font-weight-500">Smith Rhodes</span> <img class="ml-auto" src="images/payment/mastercard.png" alt="mastercard" title=""> </p>
                                <div class="account-card-overlay rounded"> <a href="#" data-target="#edit-card-details" data-toggle="modal" class="text-light btn-link mx-2"><span class="mr-1"><i class="fas fa-edit"></i></span>Edit</a> <a href="#" class="text-light btn-link mx-2"><span class="mr-1"><i class="fas fa-minus-circle"></i></span>Delete</a> </div>
                              </div>
                            </div>
                            <div class="col-12 col-sm-6 col-lg-4"> <a href="#" data-target="#add-new-card-details" data-toggle="modal" class="account-card-new d-flex align-items-center rounded h-100 p-3 mb-4 mb-lg-0">
                              <p class="w-100 text-center line-height-4 m-0"> <span class="text-3"><i class="fas fa-plus-circle"></i></span> <span class="d-block text-body text-3">Add New Card</span> </p>
                              </a> </div>
                          </div>
                        </div>
                        </div>
                        </div>
                    </div>
                    <div class="header-space"></div>
</section>
<script src="{{'assets/js/sweet-alert.min.js'|theme}}"></script>
<script type="text/javascript">
    function onedit(id) {
      var AddTrainer = $.request('onEditCertificate',{data:{id:id}}).done(function(data) {
console.log(data)
      });

    }
    function ondelete(id) {

	swal({
		title: "Delete Confirmation?",
		text: "Are you sure you want to delete this certificate?",
		type: "error",
		showCancelButton: true,
		confirmButtonColor: '#DD6B55',
		confirmButtonText: 'Yes, delete it!',
		cancelButtonText: "No, cancel plx!",
		closeOnConfirm: false,
		closeOnCancel: false
	},
	function(isConfirm){
    if (isConfirm){
      var AddTrainer = $.request('onDeleteCertificate',{data:{id:id}}).done(function(data) {
          swal("Deleted!", "Certificate has been deleted!", "success");
          swal({
        		title: "Deleted!",
        		text: "Certificate has been deleted!",
        		type: "success",
        		showCancelButton: false,
        		confirmButtonColor: '#DD6B55',
        		confirmButtonText: 'OK',
        		closeOnConfirm: true,
        		closeOnCancel: false
        	},
        	function(isConfirm){
            var AddTrainer = $.request('onRedirect',{data:{redirect:'/dashboard/organization-certificates/{{this.param.id}}'}}).done(function(data) {
            });

          });
     })

    } else {
      swal("Cancelled", "Your imaginary file is safe :)", "error");
    }
	});

    }
    function sendemail(id) {
        console.log(id)
        var loader = 'spinner' + id;
        var messege = 'successfullysent' + id;
        document.getElementById(loader).style.display = 'block'
        document.getElementById(messege).style.display = 'none'
        $.request('onSendEmail', {
            data: {
                id: id
            }
        }).done(function(data) {
            document.getElementById(loader).style.display = 'none'
            document.getElementById(messege).style.display = 'block'
            return data;
        });

    }

    function sendemailadd(id) {
        console.log(id)
        document.getElementById('spinneradd').style.display = 'block'
        document.getElementById('successfullysentadd').style.display = 'none'
        $.request('onSendEmail', {
            data: {
                id: id
            }
        }).done(function(data) {
            document.getElementById('spinneradd').style.display = 'none'
            document.getElementById('successfullysentadd').style.display = 'block'
            return data;
        });

    }
</script>
